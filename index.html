<!doctype html><html lang="en"><head><meta charset="utf-8"><script src="https://d3js.org/d3.v4.min.js"></script><script src="https://unpkg.com/topojson@3"></script><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="index.css"><link rel="shortcut icon" href="/Euromobile/favicon.ico"><style>text.shadow{stroke:#fff;stroke-width:2.5px;opacity:1}.legend{cursor:pointer}.selectioncateg{width:50%}</style><title>Datavis2020_groupe14</title><link href="/Euromobile/static/css/main.815126cb.css" rel="stylesheet"></head><body><div id="root"></div><div id="containerintro"><h1>Projet de Datavisualisation sur l'utilisation de données mobiles lors de déplacements, en Europe.</h1><p>Données par pays de 2012 à 2018. Source : <a href="https://ec.europa.eu/eurostat/fr/data/database" target="_blank">Eurostat</a></p></div><div id="selection"><div id="textleft"><h3>Cette visualisation permet d'observer en termes de pourcentages, l'utilisation de données mobiles dans chacun des pays de l'Europe.<br>Ci-dessous, le slider permet de naviguer de 2012 à 2018 selon la catégorie de population sélectionnée.</h3><div id="slideannees"><input id="slider" type="range" size="30" value="2012" min="2012" max="2018" step="1" oninput="afficheAnnee()" ,onchange="afficheAnnee()"/> <span id="Annee">Annee: 2012</span></div><div id="selectioncateg" style="float:left;width:50%"><p>Select a population category</p><select id="mySelect" onchange="afficheAnnee()" oninput="afficheAnnee()"><option value="Active labour force (employed and unemployed)">Active labour force (employed and unemployed)</option><option value="Females, 16 TO 74 years old">Females, 16 TO 74 years old</option><option value="Individuals with no or low formal education">Individuals with no or low formal education</option><option value="individuals with medium formal education">individuals with medium formal education</option><option value="Individuals with high formal education">Individuals with high formal education</option><option value="Males, 16 TO 74 years old">Males, 16 TO 74 years old</option><option value="Retired and other inactive">Retired and other inactive</option><option value="Employees, self-employed, familly workers">Employees, self-employed, familly workers</option><option value="students">students</option><option value="Unemployed">Unemployed</option><option value="Individuals, 16 TO 24 years old">Individuals, 16 TO 24 years old</option><option value="Individuals, 25 TO 54 years old">Individuals, 25 TO 54 years old</option><option value="Individuals, 55 TO 74 years old">Individuals, 55 TO 74 years old</option><option value="All individuals">All individuals</option></select></div></div><script>var width=960,height=900,center=[10,72],scale=600,colmin="#b1e6e6",colmax="#00707f",projection=d3.geoMercator().scale(scale).translate([width/1.4,0]).center(center),path=d3.geoPath().projection(projection),svg=d3.select("body").append("svg").attr("height",height),color=d3.scaleLinear().range([colmin,colmax]).domain([0,100]),g=svg.append("g"),defs=svg.append("defs"),gradient=defs.append("linearGradient").attr("id","gradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");gradient.append("stop").attr("class","start").attr("offset","0%").attr("stop-color",colmin).attr("stop-opacity",1),gradient.append("stop").attr("class","end").attr("offset","100%").attr("stop-color",colmax).attr("stop-opacity",1);var checkbox=!1;function test(){checkbox=d3.select("#checkbox")._groups[0][0].checked,afficheAnnee(d3.select("#slider")._groups[0][0].value)}function afficheAnnee(t){d3.json("https://raw.githubusercontent.com/gati23/Euromobile/master/datas/dataset.json",function(t,e){t&&console.log("error fetching data"),g.selectAll(".country").data(topojson.feature(e,e.objects.eu).features).enter().append("path").attr("class","country").attr("id","choropleth").attr("d",path).attr("fill","#757575").style("opacity",1).style("fill",function(t){});var a=document.getElementById("slider").value,r="_"+a.toString(),o=document.getElementById("mySelect").value;if(d3.select("#Annee").text("Année: "+a),0==checkbox)var s=d3.scaleLinear().range(["#b1e6e6","#00707f"]).domain([0,100]);else s.domain([0,750]);svg.selectAll("path").data(topojson.feature(e,e.objects.eu).features).style("fill",function(t){var e=t.properties[r][o];return e?s(e):"#ccc"}),svg.selectAll("title").remove(),svg.selectAll("path").append("svg:title").text(function(t){return console.log(t.properties[r][o]),[t.properties.name+" "," "+t.properties[r][o]+"%"]}),console.log(r)})}d3.json("https://raw.githubusercontent.com/gati23/Euromobile/master/datas/dataset.json",function(t,e){t&&console.log("error fetching data"),g.selectAll(".country").data(topojson.feature(e,e.objects.eu).features).enter().append("path").attr("class","country").attr("id","choropleth").attr("d",path).attr("fill","#757575").style("opacity",1).style("fill",function(t){});var a="2012".toString();if(d3.select("#Annee").text("Année: "+a),0==checkbox)var r=d3.scaleLinear().range(["#b1e6e6","#00707f"]).domain([0,100]);else r.domain([0,750]);var o=document.getElementById("mySelect").value;svg.selectAll("path").data(topojson.feature(e,e.objects.eu).features).style("fill",function(t){var e=t.properties["_"+a][o];return e?r(e):"#ccc"}).append("svg:title").text(function(t){return console.log(t.properties["_"+a][o]),[t.properties.name+" "," "+t.properties["_"+a][o]+"%"]})}),d3.json("https://raw.githubusercontent.com/gati23/Euromobile/master/datas/dataset.json",function(t,e){var o=275,s=svg.attr("class","chart");g.append("rect").attr("class","key").attr("id","choropleth").attr("width",200).attr("height",50).style("fill","url(#gradient)").style("opacity",1).attr("x",100).attr("y",57);var a=d3.scaleLinear().range([200,0]).domain([100,0]),r=d3.axisBottom(a);g.append("g").attr("class","key").attr("id","choropleth").attr("transform","translate(100,106)").call(r).style("opacity",1),g.append("text").attr("class","key").attr("id","choropleth").style("opacity",1).attr("transform","translate(100, 140)").text("Population in %"),s.append("line").attr("class","key").attr("x1",100).attr("y1",575).attr("x2",410).attr("y2",575).attr("style","stroke:rgb(0,0,0);stroke-width:2"),s.append("line").attr("class","key").attr("x1",100).attr("y1",575).attr("x2",100).attr("y2",315).attr("style","stroke:rgb(0,0,0);stroke-width:2"),s.append("text").attr("x",440).attr("y",595).text("Année");for(var n=0;n<101;n+=25)s.append("line").attr("class","key").attr("x1",100).attr("y1",300-2.5*n+o).attr("x2",105).attr("y2",300-2.5*n+o).attr("style","stroke:rgb(0,0,0);stroke-width:2"),s.append("text").attr("x",70).attr("y",305-2.5*n+o).text(n);for(var l=2012;l<2019;l++)s.append("text").attr("x",88+50*(l-2012)).attr("y",595).text(l),s.append("line").attr("class","key").attr("x1",100+50*(l-2012)).attr("y1",575).attr("x2",100+50*(l-2012)).attr("y2",570).attr("style","stroke:rgb(0,0,0);stroke-width:2");svg.selectAll("path").data(topojson.feature(e,e.objects.eu).features).on("mouseover",function(t){var e=document.getElementById("mySelect").value,a=document.getElementById("mySelect").value;console.log(a);var r=275;s.append("text").attr("x",70).attr("y",305).text([t.properties.name+" "," "+a]);for(var o=2012;o<2018;o++)0!=t.properties["_"+o.toString()][e]&0!=t.properties["_"+(o+1).toString()][e]&&s.append("line").attr("class","key").attr("x1",100+50*(o-2012)).attr("y1",300-2.5*t.properties["_"+o.toString()][e]+r).attr("x2",100+50*(o+1-2012)).attr("y2",300-2.5*t.properties["_"+(o+1).toString()][e]+r).attr("style","stroke:rgb(0,0,0);stroke-width:2"),0!=t.properties["_"+o.toString()][e]&&s.append("circle").attr("cx",100+50*(o-2012)).attr("cy",300-2.5*t.properties["_"+o.toString()][e]+r).attr("r",4).style("fill","#843c39");0!=t.properties["_"+o.toString()][e]&&s.append("circle").attr("cx",100+50*(o-2012)).attr("cy",300-2.5*t.properties["_"+o.toString()][e]+r).attr("r",5).style("fill","#843c39")}).on("mouseout",function(){s.selectAll("text").remove(),s.selectAll("line").remove(),s.selectAll("circle").remove(),g.append("rect").attr("class","key").attr("id","choropleth").attr("width",200).attr("height",50).style("fill","url(#gradient)").style("opacity",1).attr("x",100).attr("y",57);var t=d3.scaleLinear().range([200,0]).domain([100,0]),e=d3.axisBottom(t);g.append("g").attr("class","key").attr("id","choropleth").attr("transform","translate(100,106)").call(e).style("opacity",1),g.append("text").attr("class","key").attr("id","choropleth").style("opacity",1).attr("transform","translate(100, 140)").text("Population in %"),s.append("line").attr("class","key").attr("x1",100).attr("y1",575).attr("x2",410).attr("y2",575).attr("style","stroke:rgb(0,0,0);stroke-width:2"),s.append("line").attr("class","key").attr("x1",100).attr("y1",575).attr("x2",100).attr("y2",315).attr("style","stroke:rgb(0,0,0);stroke-width:2"),s.append("text").attr("x",440).attr("y",595).text("Année");for(var a=0;a<101;a+=25)s.append("line").attr("class","key").attr("x1",100).attr("y1",300-2.5*a+o).attr("x2",105).attr("y2",300-2.5*a+o).attr("style","stroke:rgb(0,0,0);stroke-width:2"),s.append("text").attr("x",70).attr("y",305-2.5*a+o).text(a);for(var r=2012;r<2019;r++)s.append("text").attr("x",88+50*(r-2012)).attr("y",595).text(r),s.append("line").attr("class","key").attr("x1",100+50*(r-2012)).attr("y1",575).attr("x2",100+50*(r-2012)).attr("y2",570).attr("style","stroke:rgb(0,0,0);stroke-width:2")})})</script><script type="text/javascript" src="/Euromobile/static/js/main.2ca19380.js"></script></div></body></html>